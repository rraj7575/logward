import { Canvas, Meta, Story, ArgsTable } from '@storybook/addon-docs';
import { Stack } from '@bedrock-layout/stack';
import { useRef } from 'react';

import { Popover } from './Popover';
import { PopoverPanel } from './PopoverPanel';
import { Button } from '../Button';
import { Typography } from '../Typography';

export const placementOptions = [
  'top',
  'bottom',
  'right',
  'left',
  'top-start',
  'top-end',
  'bottom-start',
  'bottom-end',
  'right-start',
  'right-end',
  'left-start',
  'left-end',
];

<Meta
  title="Base/Popover"
  component={Popover}
  argTypes={{
    trigger: {
      name: 'trigger',
      control: {
        type: 'radio',
      },
    },
    placement: {
      name: 'placement',
      options: placementOptions,
      control: {
        type: 'select',
      },
      defaultValue: 'bottom',
    },
  }}
/>

export const BasicContent = () => (
  <div
    style={{
      width: 200,
      padding: 10,
      background: 'var(--color-solitudeSecondary)',
      border: '1px solid var(--color-solitude)',
      borderRadius: 5,
    }}
  >
    <Typography>Popover content. It can be a string or a Component.</Typography>
  </div>
);

export const RichContent = () => (
  <div
    style={{
      width: 200,
      padding: 10,
      border: '1px solid var(--color-solitude)',
      borderRadius: 5,
    }}
  >
    <Stack gutter="1.6rem">
      <Typography name="secondary">Steps to reproduce</Typography>
      <ul>
        <li>
          <Typography>loremipsum</Typography>
        </li>
        <li>
          <Typography>loremipsum</Typography>
        </li>
        <li>
          <Typography>loremipsum</Typography>
        </li>
      </ul>
    </Stack>
  </div>
);

export const Template = (args) => (
  <div
    style={{
      height: 200,
      display: 'flex',
      alignItems: 'center',
      justifyContent: 'center',
    }}
  >
    <Popover {...args}>
      <BasicContent />
    </Popover>
  </div>
);

export const TemplatePanel = (args) => {
  return (
    <div
      style={{
        height: 200,
        display: 'flex',
        alignItems: 'start',
        justifyContent: 'center',
      }}
    >
      <PopoverPanel {...args}>
        <RichContent />
      </PopoverPanel>
    </div>
  );
};

export const TemplateManual = (args) => {
  const ref = useRef();
  return (
    <div
      style={{
        height: 300,
        display: 'flex',
        flexDirection: 'column',
        gap: 20,
        alignItems: 'center',
      }}
    >
      <Button
        appearance="bordered"
        onClick={() => {
          ref.current?.toggle();
        }}
      >
        Open manual popover
      </Button>
      <PopoverPanel {...args} ref={ref}>
        <RichContent />
      </PopoverPanel>
    </div>
  );
};

# Popover

Popover description here

```tsx
<Popover><Typography>Hello!, I'm in a Popover</Typography</Popover>
```

## Popover

<Canvas>
  <Story name="Popover">{Template.bind({})}</Story>
</Canvas>

<ArgsTable story="Popover" />

## PopoverPanel

<Canvas>
  <Story name="PopoverPanel">{TemplatePanel.bind({})}</Story>
</Canvas>

## PopoverMenu

##### Story available when Menu and MenuItem components are available.

## Change the launcher

<Canvas>
  <Story
    name="CustomLauncher"
    args={{
      trigger: 'click',
      launcher: <Button appearance="bordered">Click to open</Button>,
    }}
  >
    {TemplatePanel.bind({})}
  </Story>
</Canvas>

## Manually launching the Popover

<Canvas>
  <Story
    name="ManualLauncher"
    args={{
      trigger: 'none',
    }}
  >
    {TemplateManual.bind({})}
  </Story>
</Canvas>
