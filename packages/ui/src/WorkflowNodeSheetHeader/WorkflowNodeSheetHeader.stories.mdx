import { Inline } from '@bedrock-layout/primitives';
import { Canvas, Meta, Story } from '@storybook/addon-docs';
import { useForm } from 'react-hook-form';
import { ExpandingTextField, WorkflowNodeSheetHeader } from 'ui';

import { BackButton } from './BackButton';
import { EnvironmentActionsContainer } from './EnvironmentActionsContainer';
import { LiveButton } from './LiveButton';
import { PublishedStatusLabel } from './PublishedStatusLabel';
import { RuleTypeLabel } from './RuleTypeLabel';

<Meta
  title="Base/WorkflowNodeSheetHeader"
  component={WorkflowNodeSheetHeader}
/>

export const Template = (args) => {
  const { control } = useForm();
  return (
    <WorkflowNodeSheetHeader {...args}>
      <Inline align="center" gutter="0.8rem">
        <ExpandingTextField
          defaultValue="Untitled"
          control={control}
          name="ruleName"
        />

        <PublishedStatusLabel publishedStatus="draft" />
      </Inline>

      <EnvironmentActionsContainer
        active="staging"
        getActive={(environment) => {
          console.log(environment);
        }}
      />

      <LiveButton
        onClick={() => {
          console.log('Opening live sheet');
        }}
      />
    </WorkflowNodeSheetHeader>
  );
};

export const TemplateLive = (args) => {
  const { control } = useForm();
  return (
    <WorkflowNodeSheetHeader {...args}>
      <Inline align="center" gutter="0.8rem">
        <ExpandingTextField
          defaultValue="Untitled"
          control={control}
          name="ruleName"
          disabled
        />

        <RuleTypeLabel ruleType="ruleset" />

        <PublishedStatusLabel publishedStatus="live" />
      </Inline>

      <EnvironmentActionsContainer
        active="production"
        getActive={(environment) => {
          console.log(environment);
        }}
      />

      <BackButton onClick={() => {
        console.log('Close this live sheet')
      }} />
    </WorkflowNodeSheetHeader>
  );
};

# WorkflowNodeSheetHeader

WorkflowNodeSheetHeader description

```tsx
<WorkflowNodeSheetHeader label="WorkflowNodeSheetHeader" />
```

<Canvas>
  <Story name="WorkflowNodeSheetHeader">{Template.bind({})}</Story>
</Canvas>

<Canvas>
  <Story name="WorkflowNodeSheetHeaderLive">{TemplateLive.bind({})}</Story>
</Canvas>
